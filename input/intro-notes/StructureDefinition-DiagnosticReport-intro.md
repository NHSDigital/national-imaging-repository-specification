
## Entity Model

TODO

## Entity Mapping

Based on [Royal College of Radiologists - Understanding the Technical Options](https://www.rcr.ac.uk/media/wwtp2mif/rcr-publications_radiology-reporting-networks-understanding-the-technical-options_march-2022.pdf) mapped to FHIR following [HL7 Version 2 to FHIR - ORU_R01 Unsolicited Report Alarm](https://build.fhir.org/ig/HL7/v2-to-fhir/ConceptMap-message-oru-r01-to-bundle.html). 


| FHIR DiagnosticReport                     | HL7 v2 Segment and Name                                     | DICOM                         | Note                                                                                                                                                                                                                            | Binding                                                                                                                                                                        |
|-------------------------------------------|-------------------------------------------------------------|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| identifier.value                          | OBR-3 Filler Order Number                                   |                               |                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| subject.identifier.value                  | PID-3-1   Patient Identifiers                               |                               | Where PID-3-4 (Assigning Authority) = NHS                                                                                                                                                                                       |                                                                                                                                                                                |
| subject.identifier.system                 | PID-4-4 Assigning Authority                                 |                               | Fixed value `https://fhir.nhs.uk/Id/nhs-number`                                                                                                                                                                                 |                                                                                                                                                                                |        
| subject.display                           | PID-5      Patient Name                                     |                               |                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| basedOn.identifier.value                  | ORC-3      Filler Order Number                              | 0008,0050 AccessionNumber     |                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| basedOn.identifier.system                 | ORC-3-4 Assigning Authority                                 | 0008,0051 Assigning Authority | Convert to a FHIR System Uri                                                                                                                                                                                                    |                                                                                                                                                                                |
| basedOn.type                              |                                                             |                               | Fixed value `ServiceRequest`                                                                                                                                                                                                    |                                                                                                                                                                                |
| encounter.identifier.value                | PV1-19     Visit Number                                     |                               |                                                                                                                                                                                                                                 |                                                                                                                                                                                |
 | code                                      | OBR-4 	Universal Service Identifier                         | 0008,1032                     |                                                                                                                                                                                                                                 | [IMAGING CODE (NICIP)](https://www.datadictionary.nhs.uk/data_elements/imaging_code__nicip_.html)                                                                              |                                                                                                                                                                                | 
| category                                  | OBR-24 	Diagnostic Serv Sect ID                             | 0008,0024 Modality            |                                                                                                                                                                                                                                 |                                                                                                                                                                                |
 | effectiveDateTime                         | OBR-7	Observation Date/Time (if OBR-8 not present)          |                               | Exam completion date+time by radiographer                                                                                                                                                                                       |
| effectivePeriod                           | OBR-7 Observation Date/Time OBR-8 Observation End Date/Time |                               | 
 | performer(organisation).identifier.value  | PV1-3-4	Assigned Patient Location - Facility                | 0008,0082                     |                                                                                                                                                                                                                                 | [SITE CODE (OF IMAGING)](https://www.datadictionary.nhs.uk/data_elements/site_code__of_imaging_.html?hl=site%2Ccode) This is referring to Location codes, ODS codes preferred? | 
 | performer(organisation).identifier.system |                                                             |                               | Fixed value `https://fhir.nhs.uk/Id/ods-organisation-code`                                                                                                                                                                      |                                                                                                                                                                                |
| performer(organisation).type              |                                                             |                               | Fixed value `Organization`                                                                                                                                                                                                      |                                                                                                                                                                                |
| performer(practitioner).identifier.value  | OBR-34-1	Technician                                         | 0008,1049 and/or 0008,1070     |                                                                                                                                                                                                                                 | See [CONSULTANT CODE](https://www.datadictionary.nhs.uk/data_elements/consultant_code.html) for formats of GMC, HCPC and NMC codes                                             | 
| performer(practitioner).identifier.system |                                                             |                               | See NHS England [FHIR Practitioner](https://simplifier.net/guide/NHSDigital/Home/FHIRAssets/AllAssets/Profiles/NHSDigital-Practitioner.guide.md?version=current) identifier guidance. This link is deprecated, find replacement |                                                                                                                                                                                |
| performer(practitioner).display           | OBR-34-2 Surname                                            |                               |                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| performer(practitioner).type              |                                                             |                               | Fixed value `Practitioner`                                                                                                                                                                                                      |                                                                                                                                                                                |
