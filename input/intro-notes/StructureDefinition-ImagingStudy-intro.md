
The NIR Alpha Technical Specification recommends using [DICOM Retrieve (WADO-RS)](https://www.dicomstandard.org/using/dicomweb/retrieve-wado-rs-and-wado-uri).

<figure>
<img style="max-width: 50%" alt="Linking NRL pointers to WADO-RS APIs" src="Alpha-DICOM.png"/>
<p id="fX.X.X.X-X" class="figureTitle">Linking NRL pointers to WADO-RS APIs</p>
</figure>
<br clear="all"/>

In IHE Radiology (RAD) Domain this is:

- [IHE Radiology (RAD) Technical Framework Volume 1 Integration Profiles](https://www.ihe.net/uploadedFiles/Documents/Radiology/IHE_RAD_TF_Vol1.pdf) - DICOM Retrieve by WADO-RS Option
- [IHE Radiology (RAD) Technical Framework Volume 2 Transactions](https://www.ihe.net/uploadedFiles/Documents/Radiology/IHE_RAD_TF_Vol2.pdf) - WADO-RS Retrieve [RAD-107].

IHE UK are also suggesting the using of [DICOM Key Object Selection (KOS)](https://www.dicomstandard.org/News-dir/ftsup/docs/sups/sup59.pdf) as an alternative, which in IHE Radiology (RAD) is:

- [IHE Radiology (RAD) Technical Framework Volume 1 Integration Profiles](https://www.ihe.net/uploadedFiles/Documents/Radiology/IHE_RAD_TF_Vol1.pdf) - NOT FOUND
- [IHE Radiology (RAD) Technical Framework Volume 2 Transactions](https://www.ihe.net/uploadedFiles/Documents/Radiology/IHE_RAD_TF_Vol2.pdf) - Retrieve Key Image Notes [RAD-31] CHECK 

This document is concerned only the entity model for **Imaging Study** (from [EU eHealth Network - Medical imaging studies and reports](https://health.ec.europa.eu/document/download/0079ad26-8f8f-435b-9472-3cd8625f4220_en?filename=ehn_mi_guidelines_en.pdf)) as 

> An imaging study comprises a set of objects, including images and other objects, that were made for a specific purpose and usually in response to a request from a healthcare provider. The Imaging Study does not include the Imaging Report as defined in this guideline.

Note: Developer Tip. Most of the interactions and payloads can be viewed/inspected by going to [Medical Connections - DICOM WebViewer](https://dicomwebviewer.medicalconnections.co.uk/studies/) using a browsers development tools.

## Imaging Study Domain Model

For modelling purposes [FHIR ImagingStudy](https://hl7.org/fhir/R4/imagingstudy.html) is being used, this does not mean FHIR should be used for the implementation. It is being used as a modellng tool, this also enables cross-referencing with other models which again can be implemented in a variety of standards but here are modelled using HL7 FHIR.  
<figure>
{%include datamodel-imaging-study.svg%}
<p id="fX.X.X.X-X" class="figureTitle">Entity Diagnostic Report</p>
</figure>
<br clear="all">

 - [DICOM JSON Model](https://dicom.nema.org/medical/dicom/current/output/html/part18.html#chapter_F) from RAD-107
   - Instance Resource [Section 10.4.1.1.1](https://dicom.nema.org/medical/dicom/current/output/html/part18.html#sect_10.4.1.1.1)
   - Metadata Resource [Section 10.4.1.1.2](https://dicom.nema.org/medical/dicom/current/output/html/part18.html#sect_10.4.1.1.2)

- [Study Root Query/Retrieve Information Model](https://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_c.6.2.html)

List of DICOM IOD Modules (this appears to be used also in DICOM KOS)
[Composite Information Object Definitions (Normative)](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/chapter_A.html)

## DICOM Key Object Selection (KOS) Domain Model

Should this be this [Key Object Selection Document IOD Module Table](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_A.35.4.3.html)

| DICOM IOD Module                                                        | Usage | DICOM Reference and Link                                                                                                                                                                                                                         |
|-------------------------------------------------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Patient                                                                 | M     | C.7.1.1 [Common Composite IOD Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_c.7.html)                                                                                                                           |
| Specimen Identification                                                 | C     | C.7.1.2 [Common Composite IOD Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_c.7.html) retired?. See also [Specimen Module](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.22.html) |
| [General Study](#common-study-ie-modules)                               | M     | C.7.2.1 [Common Study IE Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.2.html)                                                                                                                              |
| [Patient Study](#common-study-ie-modules)                               | U     | C.7.2.2 [Common Study IE Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.2.html)                                                                                                                              |
| [Key Object Document Series](#key-object-document-series)               | M     | C.17.6.1 [Key Object Document Series](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.17.6.html)                                                                                                                         |
| General Equipment                                                       | M     | C.7.5.1 [Common Equipment IE Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.5.html)                                                                                                                          |
| [Key Object Document Module](#key-object-document-module)               | M     | C.17.6.2 [Key Object Document Module](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_c.17.6.2.html)                                                                                                                       |
| [SR Document Content](#key-object-document-directory-record-definition) | M     | C.17.3  [SR Document Content Module](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.17.3.html)                                                                                                                          |
| SOP Common                                                              | M     | C.12.1 [General Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.12.html)                                                                                                                                        |

### Entity Mapping

Based on [DICOM Key Object Selection (KOS)](https://www.dicomstandard.org/News-dir/ftsup/docs/sups/sup59.pdf)

#### Common Composite IOD Modules

[Common Composite IOD Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_c.7.html)

(Extract)

| Attribute Name | Tag         | Type | Attribute Description               | FHIR ImagingStudy       | NHS Data Dictionary |
|----------------|-------------|------|-------------------------------------|-------------------------|---------------------|
| Patient's Name | (0010,0010) | 2    | Patient's full name.                | subject.display         |                     | 
| Patient ID     | (0010,0020) | 2    | Primary identifier for the Patient. | suject.identifier.value | [NHS NUMBER](StructureDefinition-nhs-number.html)                     |

Note
In the case of imaging a group of small animals simultaneously, the single value of this identifier corresponds to the identification of the entire group. See also Section C.7.1.4.1.1.

#### Common Study IE Modules

C.7.2.1 [Common Study IE Modules](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.2.html)

| Attribute Name                                                      | Tag         | Type | Attribute Description                                                                                                                                                                                                                                                                                    | FHIR ImagingStudy       | NHS Data Dictionary                          |
|---------------------------------------------------------------------|-------------|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|----------------------------------------------|
| Study Instance UID                                                  | (0020,000D) | 1    | Unique identifier for the Study.                                                                                                                                                                                                                                                                         | identifier              |                                              |
| Study Date                                                          | (0008,0020) | 2    | Date the Study started.                                                                                                                                                                                                                                                                                  | started                 |                                              |
| Study Time                                                          | (0008,0030) | 2    | Time the Study started.                                                                                                                                                                                                                                                                                  | started                 |                                              |
| Referring Physician's Name                                          | (0008,0090) | 2    | Name of the Patient's referring physician.                                                                                                                                                                                                                                                               | referrer.display        |                                              |
| Referring Physician Identification Sequence                         | (0008,0096) | 3    | Identification of the Patient's referring physician. <br/> Only a single Item is permitted in this Sequence.                                                                                                                                                                                             | referrer.identifier?    |                                              |
| >Include Table 10-1 “Person Identification Macro Attributes”        |             |      |                                                                                                                                                                                                                                                                                                          |                         |                                              |
| Consulting Physician's Name                                         | (0008,009C) | 3    | Consulting physician(s) for this Patient Visit.                                                                                                                                                                                                                                                          |                         |                                              |
| Consulting Physician Identification Sequence                        | (0008,009D) | 3    | Identification of the consulting physician(s). <br/> One or more Items are permitted in this Sequence. If more than one Item, the number and order shall correspond to the value of Consulting Physician's Name (0008,009C), if present.                                                                 |                         |                                              |
| >Include Table 10-1 “Person Identification Macro Attributes”        |             |      |                                                                                                                                                                                                                                                                                                          |                         |                                              |
| Study ID                                                            | (0020,0010) | 2    | User or equipment generated Study identifier.                                                                                                                                                                                                                                                            | identifier              |                                              |
| Accession Number                                                    | (0008,0050) | 2    | A departmental Information System generated number that identifies the Imaging Service Request.                                                                                                                                                                                                          |                         |                                              |
| Issuer of Accession Number Sequence                                 | (0008,0051) | 3    | Identifier of the Assigning Authority that issued the Accession Number.<br/>Only a single Item is permitted in this Sequence.                                                                                                                                                                            |                         |                                              |
| >Include Table 10-17 “HL7v2 Hierarchic Designator Macro Attributes” |             |      |                                                                                                                                                                                                                                                                                                          |                         |                                              |
| Study Description                                                   | (0008,1030) | 3    | Institution-generated description or classification of the Study performed.                                                                                                                                                                                                                              | description             |                                              |
| Physician(s) of Record                                              | (0008,1048) | 3    | Names of the physician(s) who are responsible for overall Patient care at time of Study (see Section C.7.3.1 for Performing Physician).                                                                                                                                                                  |                         |                                              |
| Physician(s) of Record Identification Sequence                      | (0008,1049) | 3    | Identification of the physician(s) who are responsible for overall Patient care at time of Study. <br/>One or more Items are permitted in this Sequence. If more than one Item, the number and order shall correspond to the value of Physician(s) of Record (0008,1048), if present.                    |                         |                                              |
| >Include Table 10-1 “Person Identification Macro Attributes”        |             |      |                                                                                                                                                                                                                                                                                                          |                         |                                              |
| Name of Physician(s) Reading Study                                  | (0008,1060) | 3    | Names of the physician(s) reading the Study.                                                                                                                                                                                                                                                             | interpreter.display     |                                              |
| Physician(s) Reading Study Identification Sequence                  | (0008,1062) | 3    | Identification of the physician(s) reading the Study. One or more Items are permitted in this Sequence. If more than one Item, the number and order shall correspond to the value of Name of Physician(s) Reading Study (0008,1060), if present.                                                         | interpreter.identifier? |                                              |
| >Include Table 10-1 “Person Identification Macro Attributes”        |             |      |                                                                                                                                                                                                                                                                                                          |                         |                                              |
| Requesting Service                                                  | (0032,1033) | 3    | Institutional department, unit or service where the request initiated.<br/> See Note 1 and Note 2.                                                                                                                                                                                                       |                         |                                              |
| Requesting Service Code Sequence                                    | (0032,1034) | 3    | Institutional department, unit or service where the request initiated.<br/>Only a single Item is permitted in this Sequence.                                                                                                                                                                             |                         |                                              |
| >Include Table 8.8-1 “Code Sequence Macro Attributes”               |             |      | DCID 7030 “Institutional Department/Unit/Service”.                                                                                                                                                                                                                                                       |                         |                                              |
| Referenced Study Sequence                                           | (0008,1110) | 3    | A Sequence that provides reference to a Study. <br/> One or more Items are permitted in this Sequence.                                                                                                                                                                                                   |                         |                                              |
| >Include Table 10-11 “SOP Instance Reference Macro Attributes”      |             |      |                                                                                                                                                                                                                                                                                                          |                         |                                              |
| Procedure Code Sequence                                             | (0008,1032) | 3    | A Sequence that conveys the type of procedure performed.<br/>One or more Items are permitted in this Sequence.                                                                                                                                                                                           | procedureCode           | [ImagingCodeNICIP](ValueSet-imaging-code-nicip.html) confirm |
| >Include Table 8.8-1 “Code Sequence Macro Attributes”               |             |      | BCID 101 “Imaging Procedure”.                                                                                                                                                                                                                                                                            |                         |                                              |
| Reason For Performed Procedure Code Sequence                        | (0040,1012) | 3    | Coded reason(s) for performing this procedure.<br/>Note May differ from the values in Reason for the Requested Procedure (0040,100A) in Request Attribute Sequence (0040,0275), for example if what was performed differs from what was requested.<br/>One or more Items are permitted in this Sequence. | reasonCode?             |                                              |
| >Include Table 8.8-1 “Code Sequence Macro Attributes”               |             |      | No Baseline CID is defined.                                                                                                                                                                                                                                                                              |                         |                                              |

Note 

1. Both Requesting Service (0032,1033) and Requesting Service Code Sequence (0032,1034) are defined in this table; the latter is preferred, but the former may be copied from an HL7 message whether or not there is also the ability to map it to a coded form (e.g., with only ORC-17 component 1 valued).
2. Requesting Service (0032,1033) and/or Requesting Service Code Sequence (0032,1034) may be used in the absence of a specific request or order, to describe the service involved or associated with acquiring the Study.

#### Key Object Document Series

C.17.6.1 [Key Object Document Series](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.17.6.html)

| Attribute Type                      | Tag         | Type | Description                                                                                                                                                                                                                                | FHIR ImagingStudy |
|-------------------------------------|-------------|------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
| Modality                            | (0008,0060) | 1    | Modality type. <br/> Enumerated Value: <br/> KO = Key Object Selection                                                                                                                                                                     | series.modality   |
| Series Instance UID                 | (0020,000E) | 1    | Unique identifier of the Series.<br/> Note: No specific semantics are specified.                                                                                                                                                           | series.uid        |
| Series Number                       | (0020,0011) | 1    | A number that identifies the Series.<br/> Note: No specific semantics are specified.                                                                                                                                                       | series.number     |
| Referenced Study Component Sequence | (0008,1111) | 2    | Uniquely identifies the Performed Procedure Step SOP Instance for which the Series is created. Only a single Item shall be permitted in this sequence.<br/> Notes: See notes on this attribute in Section C.17.1 SR Document Series Module |                   |
| > Referenced SOP Class UID          | (0008,1150) | 1C   | Uniquely identifies the referenced SOP Class.<br/>Required if Referenced Study Component Sequence (0008,1111) is sent.                                                                                                                     |                   |
| > Referenced SOP Instance UID       | (0008,1155) | 1C   | Uniquely identifies the referenced SOP Instance.<br/> Required if Referenced Study Component Sequence (0008,1111) is sent.                                                                                                                 |                   |

#### Key Object Document Module

C.17.6.2 [Key Object Document Module](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_c.17.6.2.html)

| Attribute Name                                       | Tag         | Type | Description                                                                                                                                                                                       | FHIR ImagingStudy      | NHS Data Dictionary |
|------------------------------------------------------|-------------|------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------|---------------------|
| Instance Number                                      | (0020,0013) | 1    | A number that identifies the Document.                                                                                                                                                            | series.instance.number |                     |
| Content Date                                         | (0008,0023) | 1    | The date the document content creation started.                                                                                                                                                   |                        |                     |
| Content Time                                         | (0008,0033) | 1    | The time the document content creation started.                                                                                                                                                   |                        |                     |
| Referenced Request Sequence                          | (0040,A370) | 1C   | Identifies Requested Procedures to which this Document pertains. One or more Items may be included in this sequence.<br/> Required if this Document pertains to at least one Requested Procedure. |                        |                     |
| >Study Instance UID                                  | (0020,000D) | 1    | Unique identifier for the Study.                                                                                                                                                                  | identifier             |                     |
| >Referenced Study Sequence                           | (0008,1110) | 2    | Uniquely identifies the Study SOP Instance.<br/>Only a single Item shall be permitted in this sequence.                                                                                           |                        |                     |
| >>Referenced SOP Class UID                           | (0008,1150) | 1    | Uniquely identifies the SOP Class                                                                                                                                                                 |                        |                     |
| >>Referenced SOP Instance UID                        | (0008,1155) | 1    | Uniquely identifies the SOP Instance.                                                                                                                                                             |                        |                     |
| >Accession Number                                    | (0008,0050) | 2    | A departmental IS generated number which identifies the order for the Study.                                                                                                                      | identifier     | [RADIOLOGICAL ACCESSION NUMBER](StructureDefinition-accession-number.html)                     |
| >Placer Order Number/Imaging Service Request         | (0040,2016) | 2    | The order number assigned to the Imaging Service Request by the party placing the order.                                                                                                          |                        |                     |
| >Filler Order Number/Imaging Service Request         | (0040,2017) | 2    | The order number assigned to the Imaging Service Request by the party filling the order.                                                                                                          |                        |                     |
| >Requested Procedure ID                              | (0040,1001) | 2    | Identifier of the related Requested Procedure                                                                                                                                                     | basedOn.identifier?    |                     |
| >Requested Procedure Description                     | (0032,1060) | 2    | Institution-generated administrative description or classification of Requested Procedure.                                                                                                        |                        |                     |
| >Requested Procedure Code Sequence                   | (0032,1064) | 2    | A sequence that conveys the requested procedure. Zero or one Item may be included in this sequence.                                                                                               | basedOn.identifier     |                     |
| >>Include 'Code Sequence Macro' Table 8.8-1          |             |      | No Baseline Context ID Number is specified.                                                                                                                                                       |                        |                     |
| Current Requested Procedure Evidence Sequence        | (0040,A375) | 1    | List of all Composite SOP Instances referenced in the Content Sequence (0040,A730). One or more Items shall be included in this sequence.                                                         |                        |                     |  
| >Include 'SOP Instance Reference Macro' Table C.17-3 |             |      |                                                                                                                                                                                                   |                        |                     |

#### Key Object Document Directory Record Definition

C.17.3  [SR Document Content Module](https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.17.3.html)

| Key                                      | Tag         | Type | Type                                                                                                                                                                                                                         |
|------------------------------------------|-------------|------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Specific Character Set                   | (0008,0005) | 1C   | Required if an extended or replacement character set is used in one of the keys.                                                                                                                                             |
| Instance Number                          | (0020,0013) | 1    |                                                                                                                                                                                                                              |
| Content Date                             | (0008,0023) | 1    |                                                                                                                                                                                                                              | 
| Content Time                             | (0008,0033) | 1    |                                                                                                                                                                                                                              |
| Concept Name Code Sequence               | (0040,A043) | 1    | Code describing the concept represented by the root Content Item (Document Title). This sequence shall contain exactly one Item.                                                                                             |
| Content Sequence                         | (0040,A730) | 1C   | Contains the Target Content Items that modify the Concept Name Code Sequence of the root Content Item (Document Title). <br/> Required if the root Content Item is the Source Content Item of HAS CONCEPT MOD relationships. |
| Any Attribute of the Document IE Modules |             | 3    |                                                                                                                                                                                                                              | 
